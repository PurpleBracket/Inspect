!function(e){"use strict";function t(){if(e.XMLHttpRequest)return new XMLHttpRequest;try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}}function r(){var e=document.getElementsByTagName("script"),t=e[e.length-1];if(t.getAttribute.length){var r=t.getAttribute("src").split("/");return r.splice(r.length-1,1),r=r.toString().replace(/(,)/g,"/")}}var n=function(e){return this.config={},"string"==typeof e?(this.config.form=e,this.config=this.createConfig(this.config),void this.setForm(e)):(e&&(this.config=this.createConfig(e)),void this.setForm(this.config.form))};e.Inspect=n,n.prototype={defaults:{animateScroll:8,touched:!1,tooltip:!1},make:function(e){var t=this,r=t[t.config.form];r.dom.addEventListener("submit",function(n){r.submitted=!0,t.utils.blockForm(n);var i,o={},s=[];return i=[].slice.call(r.dom),i.map(function(e,n){s.push(t.validate(r[e.name])),"submit"!==e.type&&(o[e.name]=e.value)}),s&&t.filter(s),t.fails()?void 0:(e(o),void(r.submitted=!1))},!1)},toSubmit:function(){var e=this,t=e[e.config.form];t.dom.addEventListener("submit",function(r){t.submitted=!0,e.utils.convertObjToArray(t.dom).map(function(r){var n=e.validate(t[r.name]);n&&e.filter(n)}),e.fails()&&(e.utils.blockForm(r),t.submitted=!1)},!1)},createConfig:function(e){var t=this,r=JSON.parse(JSON.stringify(t.defaults));for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return r},setForm:function(e){var t=this;t[e]={submitted:!1,error:!1},t.prepare(e)},prepare:function(e){var t=this,r=document.querySelector("form[name="+e+"]");t[e].dom=r,t.utils.convertObjToArray(r).map(function(r){t[e][r.name]={name:r.name,touched:!1,errors:[],rules:t.prepareRules(r.getAttribute("data-rules")),custom:r.getAttribute("data-msg-custom"),field:r},t.config.touched&&t.touched(t[e][r.name])})},prepareRules:function(e){return e?e.split("|"):!1},touched:function(e){var t=this;e.field.addEventListener("focus",function(){e.touched=!0},!1),e.field.addEventListener("blur",function(r){e.rules.length&&t.untouched(e)},!1)},untouched:function(e){var t=this;e.touched=!1;var r=t.validate(e);t.filter(r)},pristine:function(){var e=this;e[e.config.form].dom.reset()},validate:function(e){var t,r,n=this;if(!e.rules)return!1;var i=e.rules.map(function(i,o){if(-1!==i.indexOf(":"))t=i.split(":"),r=n.verify[t[0]](e.field.value,t[1]);else{t=i;var s=e.field.value;if(/(checkbox|radio)/.test(e.field.type))if("radio"!==e.field.type)s=e.field.checked?s:"";else{var a=n[n.config.form].dom.querySelectorAll('input[name="'+e.field.name+'"]'),l=n.utils.convertObjToArray(a).filter(function(e){return!!e.checked});s=l.length?s:""}r=n.verify[i](s)}return-1!==e.errors.indexOf(i)&&e.errors.splice(e.errors.indexOf(i),1),r&&e.errors.push(i),r&&n.prepareAlertError(e,t),r});return i},filter:function(e){var t=this,r=e.filter(function(e){return!!e}).toString();return-1!==r.indexOf("true")?(t[t.config.form].error=!0,void(t[t.config.form].error&&t.utils.animateScroll(t))):void(t[t.config.form].error=!1)},fails:function(){var e=this;return e[e.config.form].error},prepareAlertError:function(e,t){var r=this,n=e.field.parentElement,i=r.managerAlertError(e,n);if(i){r.utils.setMessageError(e,i.querySelector(".inspect-message-text"),t),n.style.position="relative";var o=n.previousElementSibling,s=n.nextElementSibling;o?(n.style.zIndex=o.style.zIndex.length?o.style.zIndex:s.style.zIndex.length?Number(s.style.zIndex)+2:"900",n.style.zIndex=n.style.zIndex-1):n.style.zIndex="1000",n.appendChild(i)}},managerAlertError:function(e,t){var r=this;return t.querySelector(".inspect-message")?!1:r.config.tooltip?r.utils.createTooltipAlert(e):r.utils.createSimpleAlert(e)}},n.prototype.utils={animateScroll:function(t){function r(t){var r=e.scrollY;return r>c?void e.scrollTo(0,r-t):void n()}function n(){clearInterval(u)}var i=t[t.config.form].dom.querySelector(".inspect-message").parentElement,o=i.getBoundingClientRect(),s=i.ownerDocument,a=s.defaultView,l=s.documentElement,c=o.top+a.pageYOffset-l.clientTop,u=setInterval(function(){r(t.config.animateScroll)},10)},createSimpleAlert:function(e){var t=document.createElement("div"),r=document.createElement("span");return t.setAttribute("style","position:relative;width:100%;float:left;"),t.setAttribute("class","inspect-message"),r.style.color="red",r.setAttribute("class","inspect-message-text"),e.field.addEventListener("focus",function(e){e.preventDefault(),e.stopPropagation(),t.parentElement&&t.parentElement.removeChild(t)}),t.appendChild(r),t},createTooltipAlert:function(e){var t=document.createElement("div"),r=document.createElement("span"),n=document.createElement("span"),i=document.createElement("span"),o=document.createElement("span"),s=e.field;return t.setAttribute("style","position:absolute;z-index:10;opacity:0;visibility:hidden;left:-100px;top:"+Number(s.clientHeight+s.offsetTop+10)+"px;box-shadow:0 0 10px #aaa;transition:all 0.5s"),t.setAttribute("class","inspect-message"),i.setAttribute("style","border-style:solid;border-width:6px;border-color:transparent;border-bottom-color:rgba(231,76,60,0.6);position:absolute;left:50%;transform:translateX(-50%);top:-12px;"),o.setAttribute("style","font-weight:bold;position:absolute;right:3px;bottom:-2px;color:#999;cursor:pointer;padding:0 3px 0"),o.setAttribute("class","close-inspect-message"),o.innerHTML="&times;",n.setAttribute("style","background:#f2f2f2;height:15px;width:100%;float:left;"),r.setAttribute("style","background:rgba(231,76,60,0.8);font-size:14px;font-family:inherit;line-height:1em;color:#fff;width:160px;padding:10px 6px;text-align:center;float:left;"),r.setAttribute("class","inspect-message-text"),t.appendChild(r),t.appendChild(n),n.appendChild(i),t.appendChild(o),o.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),t.style.left="-100px",t.style.visibility="hidden",t.style.opacity="0",setTimeout(function(){t.parentElement.removeChild(t)},500)},!1),e.field.addEventListener("focus",function(e){e.preventDefault(),e.stopPropagation(),t.style.left="-100px",t.style.visibility="hidden",t.style.opacity="0",setTimeout(function(){t.parentElement&&t.parentElement.removeChild(t)},500)}),setTimeout(function(){/(checkbox|radio)/.test(s.type)?t.style.left=s.offsetLeft+parseInt(s.offsetWidth/2)-86+"px":t.style.left=s.offsetWidth-174+"px",t.style.visibility="visible",t.style.opacity="1"},200),t},setMessageError:function(e,t,r){var i,o=e.custom?e.custom:e.name,s=n.prototype.messages;Array.isArray(r)?(i=s[r[0]],i=i.replace(":other",r[1])):i=s[r],i=i.replace(/(:custom)/g,o),t.innerHTML=i},convertObjToArray:function(e){return[].slice.call(e)},blockForm:function(e){e.preventDefault()}},n.prototype.messages={required:"The field :custom is required",email:"Please, type a valid :custom",max:"The :custom field must contain a maximum of :other characters",min:"The :custom field must contain a minimum of :other characters",card:"Enter the :custom correctly",cpf:"The :custom typed is invalid",cnpj:"The :custom typed is invalid",cpfCnpj:"The :custom is invalid, please try again",cep:"The :custom typed is invalid",number:"The field :custom must be a number",url:"Please enter a valid :custom"},n.prototype.verify={required:function(e){return!e},email:function(e){return!/[0-9\-\.\_a-z]+@[0-9\-\.a-z]+\.[a-z]+/.test(e)},max:function(e,t){return e.length>t},min:function(e,t){return e.length<t},cpfCnpj:function(e){return!(!this.cpf(e)||!this.cnpj(e))},cnpj:function(e){var t,r=e.replace(/(\.|\-|\/)/g,""),n=[].slice.call(r),i=5,o=6,s=0,a=0;if(14!=n.length)return!0;for(t=0;12>t;t++)s+=parseInt(n[t])*parseInt(i),2!==i?--i:i=9;if(s=10*s%11,s=10===s?0:s,s!==Number(n[12]))return!0;for(t=0;13>t;t++)a+=parseInt(n[t])*parseInt(o),2!==o?--o:o=9;return a=10*a%11,a=10===a?0:a,a!==Number(n[13])},cpf:function(e){var t,r,n=e.replace(/(\.|\-)/g,""),i=[].slice.call(n),o=10,s=11,a=0,l=0;if(11!=i.length)return!0;if(t=i.every(function(e){return e===i[0]}))return!0;for(r=0;9>r;r++)a+=parseInt(i[r])*parseInt(o),--o;if(a=10*a%11,a=10===a?0:a,a!==Number(i[9]))return!0;for(r=0;10>r;r++)l+=parseInt(i[r])*parseInt(s),--s;return l=10*l%11,l=10===l?0:l,l!==Number(i[10])},cep:function(e){return!/(^[0-9]{5}-[0-9]{3}$|^[0-9]{8}$)/.test(e)},card:function(e){var t=e.replace(/(\s|\-|\.)/g,"");return!/(^[0-9]{16}$)/.test(t)},number:function(e){return!Number(e)},url:function(e){return!/(http|https)+(:\/\/)+(www.|)+[0-9a-z\-]+\.(.)+/.test(e)}},function(){var e=document.getElementsByTagName("html")[0].getAttribute("lang").toLowerCase(),i=t();i.onreadystatechange=function(){4===i.readyState&&200===i.status&&(n.prototype.messages=JSON.parse(i.responseText))},i.open("GET",r()+"/lang-inspect/"+e+".json",!0),i.send()}()}(window),"undefined"!=typeof module&&module.exports&&(module.exports=Inspect);